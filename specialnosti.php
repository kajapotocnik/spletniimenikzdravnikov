<?php
require __DIR__ . '/povezava.php';

// prijava
$isLoggedIn = isset($_SESSION['user_id']);
$userIme = $_SESSION['user_ime'] ?? '';
$userPriimek = $_SESSION['user_priimek'] ?? '';
$userFullName = trim($userIme . ' ' . $userPriimek);
$userEmail = $_SESSION['user_email'] ?? '';

// inicialke (za avatar)
$inicialke = 'U';
if ($userIme !== '' || $userPriimek !== '') {
  $prva = mb_substr($userIme, 0, 1, 'UTF-8');
  $druga = mb_substr($userPriimek, 0, 1, 'UTF-8');
  $inicialke = mb_strtoupper($prva . $druga, 'UTF-8');
}


function ikonaSpecialnosti(string $naziv): string
{
    return match ($naziv) {

        'Družinski zdravnik' =>
        '<svg class="service-svg" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><g><path d="M16,9c1.7,0,3-1.3,3-3s-1.3-3-3-3s-3,1.3-3,3S14.3,9,16,9z" fill="currentColor"></path><path d="M29.7,11.3l-7-6.5c-0.3-0.3-0.7-0.3-1.1-0.2c-0.4,0.2-0.6,0.6-0.6,1c0,0.1,0,0.3,0,0.4c0,2.8-2.2,5-5,5s-5-2.2-5-5c0-0.1,0-0.3,0-0.4c0-0.4-0.2-0.8-0.6-1c-0.4-0.2-0.8-0.1-1.1,0.2l-7,6.5c-0.3,0.2-0.4,0.6-0.3,1s0.3,0.6,0.7,0.7l8.9,2.8c-1.4,0.5-2.6,1.4-2.6,2.7c0,0.5,0.2,1.3,1.1,2c0.4,0.3,1.1,0.2,1.4-0.2c0.3-0.4,0.2-1.1-0.2-1.4c-0.3-0.2-0.3-0.4-0.3-0.4c0-0.3,1.4-1.3,4-1.5v3c-2.3,0.3-4,1.4-4,2.9c0,1,0.7,1.8,1.8,2.4c0.1,0.1,0.3,0.1,0.4,0.1c0.4,0,0.7-0.2,0.9-0.6c0.2-0.5,0-1.1-0.5-1.3C13.2,23.3,13,23.1,13,23c0-0.2,0.7-0.7,2-0.9V27c0,0.6,0.4,1,1,1s1-0.4,1-1v-0.8c0.6,0.2,1,0.6,1,0.8c0,0.4-0.8,1-2,1s-2-0.6-2-1c0-0.6-0.4-1-1-1s-1,0.4-1,1c0,1.7,1.8,3,4,3s4-1.3,4-3c0-1.4-1.3-2.6-3-2.9V22c3.1-0.2,6-1.4,6-3.5c0-1.3-1.1-2.2-2.6-2.8l8.9-2.8c0.3-0.1,0.6-0.4,0.7-0.7S29.9,11.5,29.7,11.3z M21,18.5c0,0.3-1.4,1.3-4,1.5V17C19.6,17.2,21,18.2,21,18.5z" fill="currentColor"></path></g></svg>',

        'Kardiolog' =>
        '<svg class="service-svg" viewBox="0 0 237 260" xmlns="http://www.w3.org/2000/svg" > <path fill="currentColor" d="M50.161,116.963c6.709,1.533,14.614,5.093,21.63,12.894c0.564-4.803,0.965-9.538,1.173-14.088c0.896-19.502,7.845-38.01,20.096-53.524c6.085-7.705,13.463-14.568,21.903-20.481c-1.284-1.247-6.772-5.953-6.772-5.953C100.31,29.034,103.94,4.6,103.94,4.6l-9.715-0.85c-3.077,15.018-0.617,26.78-0.589,26.903c0.385,1.776-0.742,3.53-2.518,3.917c-0.236,0.051-0.473,0.076-0.705,0.076c-1.512,0-2.875-1.048-3.212-2.587c-0.12-0.547-2.728-12.814,0.418-28.888L74.225,2c0,0-0.502,25.17-6.64,28.074c-0.15,0.07-0.565,0.217-0.888,0.295C59.443,32.12,51.77,13.324,44.326,8.558l-12.465,9.366c12.729,13.041,11.902,31.483,10.37,37.518C35.559,81.742,50.135,116.891,50.161,116.963z M46.336,199.152c4.238-0.944,10.799-9.611,17.016-29.175c2.712-8.534,4.98-18.113,6.65-27.807c-13.088-21.436-33.166-17.238-33.372-17.19c-2.362,0.531-4.716-0.958-5.246-3.325c-0.53-2.366,0.958-4.715,3.325-5.246c0.075-0.017,2.242-0.472,5.675-0.507c-3.733-10.401-12.234-37.93-7.135-60.631l-3.444-11.117c-0.788-2.519-7.871-2.802-15.532-0.406C6.611,46.144,1.219,50.48,2.007,52.999c0,0,17.183,57.384,19.244,88.427c0.404,6.081,0.973,31.907,17.317,52.829C40.205,196.435,42.683,199.966,46.336,199.152z M173.997,80.777c-0.001-0.001-0.003-0.001-0.004-0.002c-5.489-5.779-11.738-10.754-18.524-14.849c-6.373,3.02-11.962,6.736-16.406,10.995c-7.866,7.536-11.26,15.957-9.56,23.709c3.034,13.833,22.046,22.8,45.203,21.318c2.439-0.149,4.508,1.683,4.663,4.102c0.155,2.42-1.682,4.508-4.102,4.663c-1.898,0.121-3.773,0.181-5.616,0.181c-25.299,0-44.969-11.238-48.728-28.383c-2.382-10.857,1.863-22.238,12.062-31.934c13.504-12.837,36.227-20.568,36.227-20.568c1.957-0.883,1.855-7.428-0.164-12.285c-2.02-4.855-5.927-7.622-8.273-7.033l-0.028-0.065c-44.535,9.813-76.847,43.142-79.008,85.544c-0.395,7.744-5.98,80.995-32.695,91.329c47.915,52.5,159.427,69.632,182.831,24.518C246.885,203.083,205.873,112.299,173.997,80.777z" /> </svg>',

        'Nevrolog' =>
        '<svg class="service-svg" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" > <g> <path class="st0" d="M497.879,222.264l-0.131-0.122l0.106,0.106c-2.291-2.332-4.86-4.443-7.69-6.324 c-0.974-0.008-1.956-0.204-2.896-0.613c-1.521-0.647-2.708-1.735-3.518-3.036c-4.524-2.151-9.261-3.534-14.063-4.213 c-4.197-0.58-7.093-4.45-6.504-8.639c0.58-4.181,4.451-7.093,8.623-6.513c4.786,0.68,9.54,1.907,14.146,3.682 c0.728-3.338,1.137-6.741,1.137-10.194c-0.008-7.527-1.775-15.136-5.547-22.278v-0.008c-4.311-8.181-10.594-14.554-17.99-18.931 c-6.472-3.829-13.769-6.096-21.28-6.595c-0.548,6.807-2.176,13.639-5.023,20.233c-1.669,3.878-6.168,5.677-10.055,4.008 c-3.878-1.669-5.677-6.168-4.008-10.055c2.724-6.348,4.008-12.91,4.025-19.397c0-0.933-0.041-1.857-0.082-2.782 c-0.507-8.982-3.502-17.679-8.574-25.067c-5.081-7.396-12.19-13.467-21.05-17.278c-6.348-2.741-12.926-4.026-19.406-4.026 c-12.411,0-24.437,4.778-33.503,13.212c1.702,5.776,2.643,11.879,2.643,18.195c0,4.221-3.428,7.641-7.65,7.641 c-4.23,0-7.658-3.42-7.658-7.641c0-6.201-1.141-12.076-3.22-17.54l0.004,0.007c-3.526-9.228-9.773-17.14-17.753-22.735 c-7.977-5.596-17.634-8.868-28.135-8.868c-9.138,0-17.639,2.47-24.948,6.79c-5.846,3.452-10.898,8.108-14.858,13.589 c7.743,10.628,12.313,23.75,12.309,37.887c0,4.222-3.424,7.641-7.65,7.641c-4.234,0-7.658-3.42-7.658-7.641 c-0.004-12.436-4.578-23.742-12.169-32.382l-0.012-0.008c-9.028-10.292-22.2-16.738-36.946-16.747 c-10.247,0.008-19.696,3.109-27.571,8.452c-7.862,5.342-14.108,12.91-17.81,21.786c-2.402,5.801-3.751,12.199-3.751,18.899 c0,4.222-3.42,7.641-7.65,7.641c-4.226,0-7.653-3.42-7.653-7.641c0-6.21,0.904-12.223,2.54-17.917 c-5.764-2.34-11.994-3.617-18.408-3.617c-3.628,0-7.318,0.417-11.012,1.26c-10.893,2.504-20.036,8.394-26.687,16.338 c-4.806,5.735-8.251,12.542-10.051,19.872c15.827,0.295,31.633,6.398,43.819,18.334c3.018,2.953,3.072,7.796,0.114,10.815 c-2.953,3.018-7.8,3.068-10.82,0.122c-9.576-9.367-21.95-14.022-34.369-14.038c-2.225,0-4.443,0.164-6.644,0.45l-0.028,0.008 h-0.012h-0.008c-10.428,1.424-20.453,6.169-28.422,14.284c-9.372,9.58-14.015,21.926-14.018,34.353 c0,7.126,1.542,14.26,4.618,20.838c2.426,5.187,5.796,10.03,10.132,14.284l0.008,0.008c4.93,4.843,10.607,8.402,16.657,10.75 c3.939,1.513,5.898,5.948,4.372,9.891c-1.526,3.943-5.956,5.907-9.895,4.377c-7.928-3.06-15.41-7.764-21.86-14.096 c-2.827-2.782-5.355-5.76-7.572-8.893C3.13,250.465,0,260.373,0,270.452c0.004,7.813,1.866,15.708,5.817,23.112 c4.442,8.296,10.872,14.759,18.424,19.185c5.984,3.51,12.664,5.694,19.541,6.463l-0.013-0.442c0-4.05,0.377-8.026,1.088-11.871 c0.769-4.156,4.762-6.897,8.914-6.137c4.16,0.762,6.905,4.77,6.14,8.926c-0.548,2.945-0.839,5.98-0.839,9.081 c0,1.178,0.045,2.356,0.127,3.534c0.09,1.252,0.221,2.446,0.41,3.584l0.008,0.057l0.008,0.057 c3.502,24.028,24.245,41.954,48.547,41.954c1.162,0,2.34-0.05,3.523-0.132h0.012c10.775-0.777,20.449-4.941,28.107-11.404 c5.408-4.565,9.801-10.251,12.832-16.666c1.804-3.82,6.369-5.456,10.19-3.648c3.82,1.808,5.452,6.365,3.648,10.186 c-3.261,6.897-7.723,13.114-13.11,18.432c3.01,9.229,8.659,17.189,16.023,23.088c8.463,6.766,19.106,10.742,30.593,10.742 c1.162,0,2.331-0.033,3.526-0.123h0.012c7.289-0.531,14.031-2.61,20.007-5.874c-0.941-4.41-1.461-8.918-1.461-13.466 c0-9.392,2.074-18.948,6.419-27.948c1.832-3.82,6.41-5.408,10.214-3.574c3.804,1.832,5.408,6.405,3.571,10.21 c-3.33,6.922-4.901,14.161-4.901,21.312c0,5.015,0.778,9.988,2.27,14.734l0.004,0.008c3.919,12.501,12.779,23.398,25.533,29.542 c6.893,3.329,14.133,4.9,21.288,4.9c11.339,0,22.441-3.968,31.215-11.167l0.028-0.016c5.339-4.401,9.83-9.965,13.037-16.608 l0.008-0.025c3.002-6.21,4.565-12.722,4.851-19.218c0.188-4.221,3.763-7.494,7.993-7.314c4.213,0.197,7.485,3.764,7.305,7.986 c-0.384,8.508-2.438,17.098-6.373,25.214l0.008-0.008c-3.166,6.561-7.306,12.345-12.166,17.27 c9.024,12.975,24.037,21.124,40.268,21.116c3.018,0,6.079-0.287,9.171-0.859c11.806-2.234,21.77-8.468,28.855-17.083 c7.078-8.614,11.192-19.562,11.192-31.122c0-0.36-0.008-0.711-0.017-1.047v-0.048c-0.041-2.618-0.319-5.334-0.843-8.067 c-1.219-6.504-3.705-12.403-7.1-17.639c-4.942-4.36-10.456-10.038-15.634-16.37c-5.506-6.749-10.611-14.12-14.031-21.557 c-2.25-4.982-3.854-9.998-3.886-15.307c0-2.348,0.352-4.778,1.211-7.126c0.867-2.348,2.274-4.606,4.14-6.455v0.008 c2.986-2.994,7.829-2.994,10.816,0c2.986,2.978,2.986,7.838,0,10.815c-0.295,0.311-0.442,0.54-0.589,0.925 c-0.147,0.393-0.27,0.974-0.27,1.832c-0.033,1.922,0.762,5.196,2.496,8.934c1.71,3.739,4.254,7.936,7.241,12.084 c5.931,8.312,13.629,16.477,19.422,21.435l0.786,0.679l0.581,0.85c4.745,7.06,8.197,15.184,9.866,24.061v0.008 c0.238,1.268,0.393,2.527,0.556,3.804c0.753,0.033,1.522,0.098,2.291,0.098c9.711-0.008,19.471-2.879,28.062-8.918 c6.831-4.794,12.026-10.97,15.552-17.9c3.526-6.938,5.359-14.62,5.351-22.35c0-7.241-1.62-14.497-4.892-21.263 c-3.003,0.974-6.062,1.743-9.18,2.282c-4.164,0.721-8.124-2.078-8.852-6.25c-0.704-4.164,2.094-8.115,6.258-8.835 c13.557-2.34,25.951-10.226,33.642-22.899c4.859-7.977,7.15-16.755,7.159-25.452C512,244.027,507.034,231.526,497.879,222.264z M147.188,163.851c7.322-8.64,17.033-14.784,27.464-18.801c10.452-4.017,21.68-5.956,32.439-5.956 c10.476,0.008,20.522,1.816,29.076,5.743c3.833,1.768,5.51,6.316,3.742,10.154c-1.775,3.844-6.323,5.514-10.16,3.746 c-5.919-2.757-13.99-4.352-22.658-4.344c-8.901,0-18.416,1.652-26.937,4.941c-8.537,3.272-16.023,8.173-21.287,14.399v0.008 c-2.724,3.215-7.555,3.625-10.783,0.892C144.86,171.901,144.456,167.074,147.188,163.851z M321.386,344.803 c-8.893,0.016-16.971-0.99-24.347-2.7c0.204,2.103,0.343,4.434,0.343,6.93c0,4.998-0.532,10.7-2.114,16.69 c-1.579,5.98-4.226,12.263-8.403,18.301c-2.405,3.469-7.17,4.336-10.652,1.931c-3.472-2.405-4.34-7.167-1.93-10.652 c3.068-4.434,4.999-9.008,6.188-13.49c1.186-4.484,1.608-8.868,1.608-12.779c0.004-5.392-0.806-9.867-1.391-12.387 c-3.734-1.693-7.207-3.607-10.414-5.702c-12.808-8.312-21.382-19.258-26.777-29.69c-3.604-6.962-5.822-13.72-6.987-19.578 c-0.671-3.338-1.002-6.39-1.002-9.146c0-4.23,3.423-7.657,7.657-7.657c4.226,0,7.65,3.427,7.65,7.657 c-0.013,2.242,0.466,5.956,1.681,10.178c1.206,4.246,3.133,9.081,5.919,13.94c5.584,9.736,14.46,19.504,28.139,25.845 c9.142,4.238,20.518,6.995,34.832,7.003c4.226,0,7.654,3.428,7.654,7.649C329.04,341.375,325.612,344.803,321.386,344.803z M375.268,288.917c-1.579,3.919-6.03,5.833-9.957,4.254c-3.91-1.562-5.816-5.988-4.271-9.916v-0.008l0.05-0.114 c0.048-0.132,0.122-0.36,0.228-0.671c0.205-0.606,0.491-1.571,0.778-2.766c0.589-2.414,1.17-5.825,1.17-9.572l-0.025-0.548 c-10.48,3.567-20.248,5.195-29.235,5.195c-13.581,0.017-25.321-3.706-34.885-9.359c-9.58-5.653-17.025-13.139-22.588-20.723 c-6.324-8.631-14.628-16.355-24.13-21.836c-9.515-5.482-20.167-8.737-31.482-8.745c-9.932,0.024-20.457,2.495-31.473,8.525 c-10.435,5.743-17.172,13.384-21.513,21.762c-4.315,8.37-6.119,17.549-6.115,25.886c-0.021,7.731,1.6,14.718,3.726,19.144 c1.808,3.829,0.176,8.386-3.645,10.202c-3.816,1.8-8.382,0.18-10.194-3.648c-3.313-7.06-5.171-15.929-5.191-25.697 c0.004-9.695,1.935-20.281,6.644-30.418c-9.487,2.152-18.302,3.109-26.348,3.1c-4.34,0.008-8.426-0.294-12.321-0.769 c-0.27,1.014-0.74,1.996-1.448,2.856l-0.004,0.007h-0.008l-0.09,0.115c-0.082,0.115-0.225,0.295-0.413,0.532 c-0.373,0.491-0.929,1.252-1.628,2.242c-1.391,1.971-3.325,4.9-5.416,8.59c-4.189,7.364-8.946,17.729-11.274,29.387 c-0.822,4.148-4.859,6.84-9.003,6.005c-4.144-0.827-6.831-4.852-6.001-9.008c2.774-13.843,8.222-25.582,12.963-33.936 c2.466-4.345,4.732-7.756,6.39-10.096c-6.242-1.873-11.646-4.164-16.051-6.496c-10.072-5.351-15.336-10.726-15.762-11.159 c-2.933-3.044-2.842-7.886,0.197-10.815c3.035-2.929,7.862-2.839,10.79,0.172l0.008-0.008l0.074,0.074l0.471,0.45 c0.45,0.409,1.182,1.039,2.18,1.825c1.996,1.578,5.081,3.746,9.204,5.923c8.258,4.369,20.604,8.795,37.142,8.812 c11.61,0,25.33-2.218,41.25-8.337c4.041-3.755,8.68-7.192,14.03-10.112c13.086-7.191,26.295-10.415,38.828-10.406 c14.293,0,27.612,4.148,39.127,10.791c11.527,6.659,21.308,15.79,28.826,26.032c4.561,6.218,10.578,12.214,18.015,16.592 c7.457,4.377,16.305,7.232,27.116,7.241c7.392,0,15.753-1.366,25.186-4.68c-2.282-3.714-5.727-7.29-11.38-10.513 c-3.681-2.078-4.974-6.758-2.896-10.431c2.079-3.682,6.75-4.975,10.424-2.904c9.056,5.105,15.119,11.862,18.628,18.915 c3.543,7.052,4.606,14.194,4.606,20.273C378.54,280.727,375.464,288.369,375.268,288.917z M372.404,195.152 c-17.884,0.008-33.527-4.819-46.183-12.125c-1.771,2.487-4.168,5.58-7.249,8.975c-6.921,7.592-17.106,16.518-30.724,21.41 c-3.98,1.424-8.357-0.654-9.781-4.638c-1.419-3.984,0.654-8.354,4.634-9.777c10.035-3.559,18.436-10.611,24.27-16.984 c2.688-2.912,4.79-5.645,6.316-7.772c-7.567-6.381-13.52-13.646-17.594-21.107c-3.895-7.183-6.144-14.563-6.165-21.762 c0-4.221,3.424-7.641,7.649-7.641c4.226,0,7.654,3.42,7.654,7.641c-0.02,3.87,1.338,9.032,4.299,14.44 c2.949,5.424,7.428,11.085,13.262,16.141c11.682,10.128,28.577,17.892,49.611,17.892c4.222,0,7.65,3.428,7.65,7.657 C380.054,191.733,376.626,195.152,372.404,195.152z M432.732,302.915c-2.699,3.256-7.526,3.714-10.783,1.023 c-3.255-2.692-3.714-7.519-1.022-10.775c8.328-10.144,11.42-20.338,11.446-30.115c0.016-8.893-2.692-17.491-6.963-24.715 c-4.246-7.241-10.07-13.016-15.682-16.232c-3.739-2.168-7.298-3.158-10.113-3.15c-4.23,0-7.657-3.42-7.657-7.65 c0-4.221,3.428-7.649,7.657-7.649c4.664,0,9.212,1.138,13.532,3.043c4.311,1.898,8.402,4.574,12.198,7.846 c7.568,6.545,14.006,15.47,18.039,25.918c2.692,6.963,4.304,14.604,4.304,22.588C447.712,276.187,443.229,290.242,432.732,302.915z " /> </g> </svg> ',

        'Ortoped' =>
        '<svg class="service-svg" viewBox="0 0 213.134 213.134" xmlns="http://www.w3.org/2000/svg"> <path fill="currentColor" d="M90.063,107.15c6.079,0.627,12.019-1.272,16.505-5.133c3.923,3.377,8.908,5.251,14.209,5.251 c0.76,0,1.532-0.04,2.294-0.118c10.153-1.042,18.335-9.157,19.453-19.293c0.78-7.068-1.905-14.098-7.183-18.806 c-6.714-5.991-10.564-14.245-10.564-22.646V4c0-2.209-1.791-4-4-4H92.358c-2.209,0-4,1.791-4,4v42.405 c0,8.4-3.851,16.655-10.565,22.646c-5.276,4.708-7.962,11.738-7.183,18.807C71.729,97.993,79.909,106.107,90.063,107.15z" ></path> <path d="M146.091,115.97c-0.004-0.036-0.007-0.07-0.01-0.09c-0.421-3.683-3.565-6.46-7.313-6.46c-1.974,0-3.836,0.771-5.243,2.169 c-2.578,2.56-5.943,4.17-9.475,4.533c-3.685,0.377-7.33-0.506-10.376-2.515c-2.106-1.389-4.564-2.123-7.106-2.123 c-2.543,0-5,0.734-7.105,2.123c-3.047,2.008-6.699,2.894-10.377,2.515c-3.532-0.363-6.897-1.973-9.475-4.533 c-1.408-1.398-3.271-2.169-5.244-2.169c-3.748,0-6.893,2.778-7.323,6.551c-0.859,7.787,2.123,15.504,7.977,20.646 c7.469,6.561,11.753,15.628,11.753,24.879v47.639c0,2.209,1.791,4,4,4h31.589c2.209,0,4-1.791,4-4v-47.639 c0-9.25,4.284-18.318,11.753-24.879C143.969,131.474,146.951,123.756,146.091,115.97z" /> </svg>',

        'Zobozdravnik' =>
        '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" class="service-svg" > <path d="M25.1,15c1.2-2.3,1.9-4.9,1.9-7.7c0-1.9-0.6-3.4-1.7-4.3c-2.1-1.7-5.5-0.9-7.7-0.4C17,2.7,16.3,2.9,16,2.9s-1-0.1-1.6-0.3C12.2,2.1,8.8,1.4,6.7,3C5.6,3.9,5,5.4,5,7.3c0,2.8,0.7,5.4,1.9,7.7c0.8,1.4,1,3.2,0.7,4.8c-1.5,7.6-0.4,9,0,9.5C7.9,29.8,8.4,30,9,30c2.1,0,3-2.4,3.9-4.7c0.8-2.1,1.7-4.4,3.1-4.4c1.7,0,2.9,2.8,3.8,5.1c0.9,2.2,1.7,4,3.2,4c0.6,0,1.1-0.2,1.4-0.7c0.4-0.5,1.5-1.8,0-9.5 C24.1,18.2,24.3,16.4,25.1,15z" /> </svg> ',

        'Oftalmolog' =>
        '<svg class="service-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" > <path fill="currentColor"  d="M3,10C2.76,10 2.55,10.09 2.41,10.25C2.27,10.4 2.21,10.62 2.24,10.86L2.74,13.85C2.82,14.5 3.4,15 4,15H7C7.64,15 8.36,14.44 8.5,13.82L9.56,10.63C9.6,10.5 9.57,10.31 9.5,10.19C9.39,10.07 9.22,10 9,10H3M7,17H4C2.38,17 0.96,15.74 0.76,14.14L0.26,11.15C0.15,10.3 0.39,9.5 0.91,8.92C1.43,8.34 2.19,8 3,8H9C9.83,8 10.58,8.35 11.06,8.96C11.17,9.11 11.27,9.27 11.35,9.45C11.78,9.36 12.22,9.36 12.64,9.45C12.72,9.27 12.82,9.11 12.94,8.96C13.41,8.35 14.16,8 15,8H21C21.81,8 22.57,8.34 23.09,8.92C23.6,9.5 23.84,10.3 23.74,11.11L23.23,14.18C23.04,15.74 21.61,17 20,17H17C15.44,17 13.92,15.81 13.54,14.3L12.64,11.59C12.26,11.31 11.73,11.31 11.35,11.59L10.43,14.37C10.07,15.82 8.56,17 7,17M15,10C14.78,10 14.61,10.07 14.5,10.19C14.42,10.31 14.4,10.5 14.45,10.7L15.46,13.75C15.64,14.44 16.36,15 17,15H20C20.59,15 21.18,14.5 21.25,13.89L21.76,10.82C21.79,10.62 21.73,10.4 21.59,10.25C21.45,10.09 21.24,10 21,10H15Z"  /> </svg> ',

        'Ginekolog' =>
        '<svg class="service-svg" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" ><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"  d="M8 0C6.89543 0 6 0.895431 6 2V2.0359L5.96891 2.01795C5.01233 1.46566 3.78915 1.79341 3.23686 2.75C2.68458 3.70659 3.01233 4.92977 3.96891 5.48205L4 5.5L3.96891 5.51795C3.01233 6.07023 2.68458 7.29342 3.23686 8.25C3.78915 9.20658 5.01233 9.53434 5.96891 8.98205L6 8.9641V9C6 10.1046 6.89543 11 8 11C9.10457 11 10 10.1046 10 9V8.9641L10.0311 8.98205C10.9877 9.53434 12.2109 9.20658 12.7631 8.25C13.3154 7.29342 12.9877 6.07023 12.0311 5.51795L12 5.5L12.0311 5.48205C12.9877 4.92977 13.3154 3.70659 12.7631 2.75C12.2109 1.79341 10.9877 1.46566 10.0311 2.01795L10 2.0359V2C10 0.895431 9.10457 0 8 0ZM7.99995 7C8.82838 7 9.49995 6.32843 9.49995 5.5C9.49995 4.67157 8.82838 4 7.99995 4C7.17152 4 6.49995 4.67157 6.49995 5.5C6.49995 6.32843 7.17152 7 7.99995 7Z" /> <path fill="currentColor" d="M7 16H6C3.23858 16 1 13.7614 1 11V10H2C4.76142 10 7 12.2386 7 15V16Z" /> <path fill="currentColor" d="M10 16H9V15C9 12.2386 11.2386 10 14 10H15V11C15 13.7614 12.7614 16 10 16Z" /> </svg> ',

        'Pediater' =>
        '<svg class="service-svg" viewBox="-64 0 512 512" xmlns="http://www.w3.org/2000/svg" > <path fill="currentColor" d="M192 160c44.2 0 80-35.8 80-80S236.2 0 192 0s-80 35.8-80 80 35.8 80 80 80zm-53.4 248.8l25.6-32-61.5-51.2L56.8 383c-11.4 14.2-11.7 34.4-.8 49l48 64c7.9 10.5 19.9 16 32 16 8.3 0 16.8-2.6 24-8 17.7-13.2 21.2-38.3 8-56l-29.4-39.2zm142.7-83.2l-61.5 51.2 25.6 32L216 448c-13.2 17.7-9.7 42.8 8 56 7.2 5.4 15.6 8 24 8 12.2 0 24.2-5.5 32-16l48-64c10.9-14.6 10.6-34.8-.8-49l-45.9-57.4zM376.7 145c-12.7-18.1-37.6-22.4-55.7-9.8l-40.6 28.5c-52.7 37-124.2 37-176.8 0L63 135.3C44.9 122.6 20 127 7.3 145-5.4 163.1-1 188 17 200.7l40.6 28.5c17 11.9 35.4 20.9 54.4 27.9V288h160v-30.8c19-7 37.4-16 54.4-27.9l40.6-28.5c18.1-12.8 22.4-37.7 9.7-55.8z"  /> </svg> ',

        default => '',
    };
}

// opisi
function opisSpecialnosti(string $naziv): string {
  $n = mb_strtolower($naziv, 'UTF-8');

  return match (true) {
    str_contains($n, 'družinski') => 'Osnovna zdravstvena obravnava, preventivni pregledi in napotitve.',
    str_contains($n, 'ginek')     => 'Zdravje žensk, ginekološki pregledi, nosečnost in preventiva.',
    str_contains($n, 'kardi')     => 'Diagnostika in zdravljenje bolezni srca in ožilja.',
    str_contains($n, 'nevro')     => 'Težave z živčevjem: glavoboli, vrtoglavice, nevrološke bolezni.',
    str_contains($n, 'oftal')     => 'Pregledi vida, očesne bolezni, svetovanje in zdravljenje.',
    str_contains($n, 'ortop')     => 'Poškodbe in bolezni kosti, sklepov ter gibalnega aparata.',
    str_contains($n, 'pedi')      => 'Zdravstvena oskrba dojenčkov, otrok in mladostnikov.',
    str_contains($n, 'zobo')      => 'Preventiva in zdravljenje zob ter ustne votline.',
    default                       => 'Specialistična obravnava in svetovanje.',
  };
}

$slikeSpecialnosti = [
  'Družinski zdravnik' => 'druzinski_zdravnik.jpg',
  'Kardiolog'         => 'kardiolog.jpg',
  'Nevrolog'          => 'nevrolog.jpg',
  'Ortoped'           => 'ortoped.jpg',
  'Zobozdravnik'      => 'zobozdravnik.jpg',
  'Oftalmolog'        => 'oftalmolog.jpg',
  'Ginekolog'         => 'ginekolog.jpg',
  'Pediater'          => 'pediater.jpg',
];


// preberi specialnosti
$poizvedba = "
  SELECT id_specializacija, naziv
  FROM specializacija
  ORDER BY FIELD(id_specializacija, 1, 12, 3, 6, 13, 5, 4, 11)
";
$rezultat = $conn->query($poizvedba);

$specialnosti = [];
if ($rezultat) {
  while ($vrstica = $rezultat->fetch_assoc()) {
    $specialnosti[] = $vrstica;
  }
}
?>

<!DOCTYPE html>
<html lang="sl">
  <head>
    <meta charset="UTF-8" />
    <title>Spletni imenik zdravnikov</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="styles/styleIndex.css?v=5" />
    <link rel="stylesheet" href="styles/styleSpecialnosti.css?v=5" />
  </head>
  <body>
    <header class="navbar">
      <div class="container">
        <div class="logo">
          <img src="img/logo1.png" alt="Logo" />
        </div>
        <nav>
          <ul>
            <li><a href="index.php" class="nav-link">Domov</a></li>
            <li><a href="zdravniki.php" class="nav-link">Poišči zdravnika</a></li>
            <li><a href="specialnosti.php" class="nav-link active">Specialnosti</a></li>
            <li><a href="mesta.php" class="nav-link">Mesta</a></li>
            <li><a href="ustanove.php" class="nav-link">Zdravstvene ustanove</a></li>
            <li><a href="kontakt.php" class="nav-link">Kontakt</a></li>
          </ul>
        </nav>
        
        <?php if (!$isLoggedIn): ?>
          <a href="prijava.php" class="btn-nav">Prijava</a>
        <?php else: ?>
          <div class="user-menu">
            <button class="user-menu-trigger" type="button">
              <span class="user-avatar"><?= htmlspecialchars($initials) ?></span>
              <span class="user-name"><?= htmlspecialchars($userFullName) ?></span>
              <span class="user-chevron">
                <svg width="14" height="14" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </span>
            </button>

            <div class="user-dropdown">
              <?php if ($isDoctor): ?>
                <a href="profil_zdravnik.php" class="user-dropdown-item">Moj profil</a>
              <?php endif; ?>

              <?php if (($_SESSION['user_vloga'] ?? '') === 'ADMIN'): ?>
                <a href="admin_panel.php" class="user-dropdown-item">Admin plošča</a>
              <?php endif; ?>

              <a href="logout.php" class="user-dropdown-item">Odjava</a>
            </div>
          </div>
        <?php endif; ?>
      </div>
    </header>

    <section class="hero">
      <div class="hero-content">
        <div class="hero-inner">
          <div class="hero-text">
            <h1>Diagnostični center blizu vas</h1>
            <p>
              Hitro najdite pravega zdravnika, specialistično ambulanto ali
              diagnostični pregled. Vsi podatki na enem mestu, preverjeni in
              ažurni.
            </p>
          </div>

          <div class="hero-right hero-image">
            <div class="doctor-bg"></div>
            <img
              src="img/hero-doctor.png"
              alt="Zdravnica"
              class="hero-doctor"
            />
          </div>
        </div>
      </div>
    </section>

<main>
  <section class="spec-hero">
    <div class="spec-hero-inner">
      <div class="spec-kicker">NAŠE SPECIALNOSTI</div>
      <h1>Širok nabor specialnosti <span>za tvoje zdravje</span></h1>
    </div>
  </section>

  <section class="spec-section">
    <div class="spec-grid">
      <?php if (!$specialnosti): ?>
        <p>Trenutno ni specialnosti v bazi.</p>
      <?php endif; ?>

      <?php foreach ($specialnosti as $specialnost): ?>
        <article class="spec-card">
          <?php
            $file = $slikeSpecialnosti[$specialnost['naziv']] ?? 'default.jpg';
            $imgPath = 'img/specialnosti/' . $file; ?>
            <div class="spec-photo lazy-bg" data-bg="<?= htmlspecialchars($imgPath) ?>"></div>

          <div class="spec-body">
            <div class="spec-ico">
              <?= ikonaSpecialnosti($specialnost['naziv']) ?>
            </div>

            <h3 class="spec-title"><?= htmlspecialchars($specialnost['naziv']) ?></h3>
            <p class="spec-desc"><?= htmlspecialchars(opisSpecialnosti($specialnost['naziv'])) ?></p>

            <a class="read-more-btn" href="zdravniki.php?specializacija=<?= urlencode($specialnost['naziv']) ?>">
              Poglej zdravnike
            </a>
          </div>
        </article>
      <?php endforeach; ?>
    </div>
  </section>
</main>

    <footer>
      <div class="container">
        <div>
          ©
          <?php echo date('Y'); ?>
          Spletni imenik zdravnikov. Vse pravice pridržane.
        </div>
        <div>
          Mnenja pacientov niso nadomestilo za strokovni zdravniški nasvet.
        </div>
      </div>
    </footer>
  </body>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const elementi = document.querySelectorAll(".lazy-bg");

  if (!("IntersectionObserver" in window)) { //če ne podpira IntersectionObserver
    // slike se naložijo brez lazy loading
    elementi.forEach(element => {
      element.style.backgroundImage = `url('${element.dataset.bg}')`;
      element.classList.remove("lazy-bg");
    });
    return;
  }

  // vidno
  const najdi = new IntersectionObserver((vnosi, obs) => {
    vnosi.forEach(vnos => {
      if (!vnos.isIntersecting) return;

      const element = vnos.target;
      const src = element.dataset.bg;

      // data-bg
      if (src) element.style.backgroundImage = `url('${src}')`;

      // odstrani lazy-bg
      element.classList.remove("lazy-bg");
      obs.unobserve(element);
    });
  }, { 
    rootMargin: "200px 0px" //je 200px preden je vidna
  });

  elementi.forEach(element => najdi.observe(element));
});
</script>


</html>
